var _custom_media=true;jQuery(document).ready(function($){$('.dc-wp-fields-uploader').each(function(){addDCUploaderProperty($(this));});$('.add_media').on('click',function(){_custom_media=false;});});function addDCUploaderProperty(dcuploader){dcuploader.find('img').each(function(){var src=jQuery(this).attr('src');if(src.length==0)jQuery(this).hide();});dcuploader.find('.upload_button').click(function(e){var mediaUploader;var button=jQuery(this);var mime=jQuery(this).data('mime');var id=button.attr('id').replace('_button','');_custom_media=true;e.preventDefault();if(mediaUploader){mediaUploader.open();return;}
mediaUploader=wp.media.frames.file_frame=wp.media({title:media_upload_params.media_title,button:{text:media_upload_params.media_title},multiple:false});mediaUploader.on('select',function(){var attachment=mediaUploader.state().get('selection').first().toJSON();if(mime=='image'){jQuery("#"+id+'_display').attr('src',attachment.url).removeClass('placeHolder').show();if(jQuery("#"+id+'_preview').length>0)
jQuery("#"+id+'_preview').attr('src',attachment.url);}else{jQuery("#"+id+'_display').attr('href',attachment.url);}
jQuery("#"+id+'_display span').show();jQuery("#"+id).val(attachment.url);jQuery("#"+id).hide();button.hide();jQuery("#"+id+'_remove_button').show();});mediaUploader.open();return false;});dcuploader.find('.remove_button').each(function(){var button=jQuery(this);var mime=jQuery(this).data('mime');var id=button.attr('id').replace('_remove_button','');if(mime=='image')
var attachment_url=jQuery("#"+id+'_display').attr('src');else
var attachment_url=jQuery("#"+id+'_display').attr('href');if(!attachment_url||attachment_url.length==0){button.hide();jQuery("#"+id+'_display span').hide();}else{jQuery("#"+id+'_button').hide();}
button.click(function(e){id=jQuery(this).attr('id').replace('_remove_button','');if(mime=='image'){jQuery("#"+id+'_display').attr('src','').addClass('placeHolder').hide();jQuery("#"+id+'_preview').attr('src','');}else{jQuery("#"+id+'_display').attr('href','#');}
jQuery("#"+id+'_display span').hide();jQuery("#"+id).val('');jQuery(this).hide();jQuery("#"+id+'_button').show();return false;});});};